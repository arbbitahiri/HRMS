function init_dropzone() {
    Dropzone.autoDiscover = false;

    $('#kt_dropzone_files').dropzone({
        url: '@Url.Action("AddDocuments", "Staff")',
        thumbnailWidth: 80,
        thumbnailHeight: 80,
        autoProcessQueue: false,
        uploadMultiple: true,
        parallelUploads: 5,
        acceptedFiles: '@Model.AllowedFormats',
        maxFilesize: 5,
        init: function (e) {
            var my_dropzone = this;
            document.onpaste = function (event) {
                var items = (event.clipboardData || event.originalEvent.clipboardData).items;
                for (index in items) {
                    var item = items[index];
                    if (item.kind === 'file') {
                        my_dropzone.addFile(item.getAsFile());
                    }
                }
            }

            $('#frm_create_document').on('submit', function(e) {
                e.preventDefault();
                if (!$(this).valid()) {
                    return false
                }
            });

            $('#btn_add_document').on('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                if (my_dropzone.getQueuedFiles().length > 0) {
                    my_dropzone.processQueue();
                } else {
                    $('#frm_create_document').submit();
                }
            });

            this.on("sendingmultiple", function (data, xhr, formData) {
                var form = $('#frm_create_document')[0];
                var formElements = new FormData(form);

                for (var pair of formElements.entries()) {
                    formData.append(pair[0], pair[1]);
                }
            });

            this.on("maxfilesexceeded", function (file) {
                this.removeAllFiles();
                this.addFile(file);
            });

            this.on('successmultiple', function (files, response) {
                success_create_document(response);
            });

            this.on("addedfile", function (file) {
                var removeButton = Dropzone.createElement("<i></i>");
                removeButton.classList.add("fas", "fa-times", "fa-lg", 'text-primary');
                removeButton.style.setProperty('position', 'absolute');
                removeButton.style.setProperty('top', '-14px');
                removeButton.style.setProperty('right', '5px');
                removeButton.style.setProperty('float', "right");
                var _this = this;
                removeButton.addEventListener("click", function (e) {
                    e.preventDefault();
                    e.stopPropagation();
                    _this.removeFile(file);
                });
                file.previewElement.appendChild(removeButton);
            });

            this.on('error', function (file, message) {
                console.log(file);
                console.log(message);
                this.removeFile(file);
                Swal.fire({
                    title: '@Html.Raw(Resource.Error)',
                    text: '@Html.Raw(Resource.ErrorProcessingData)',
                    icon: 'error',
                    confirmButtonColor: '#d33',
                    confirmButtonText: '@Html.Raw(Resource.Okay)'
                });
            })
        }
    });
}